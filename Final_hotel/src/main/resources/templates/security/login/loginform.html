<!DOCTYPE html>
<html th:replace="~{layout/layout_main :: layout(~{::title}, ~{::link}, ~{::style}, ~{::script}, ~{::div.container})}" 
      lang="ko" 
      xmlns:th="http://www.thymeleaf.org"> 
<!-- ::title 은   현재 페이지의 title   태그를 읽어다가 templates/layout/layout_main.html 파일의 th:fragment="layout(title, link, css, script, content)" 에 있는 첫번째 파라미터로 전달한다. -->
<!-- ::link  는   현재 페이지의 link    태그를 읽어다가 templates/layout/layout_main.html 파일의 th:fragment="layout(title, link, css, script, content)" 에 있는 두번째 파라미터로 전달한다. -->
<!-- ::style 은   현재 페이지의 style   태그를 읽어다가 templates/layout/layout_main.html 파일의 th:fragment="layout(title, link, css, script, content)" 에 있는 세번째 파라미터로 전달한다. -->
<!-- ::script 는  현재 페이지의 script  태그를 읽어다가 templates/layout/layout_main.html 파일의 th:fragment="layout(title, link, css, script, content)" 에 있는 네번째 파라미터로 전달한다. -->
<!-- ::div.container 은 현재 페이지의 div.container 태그를 읽어다가 templates/layout/layout_main.html 파일의 th:fragment="layout(title, link, css, script, content)" 에 있는 다섯번째 파라미터로 전달한다. --> 
<!-- 타임리프는 백엔드 서버에서 HTML을 동적으로 렌더링하는 용도로 사용된다. -->

<head>
<meta charset="UTF-8">
<!--/* #스프링시큐리티12 */-->
<title>스프링 시큐리티 로그인</title>

<link rel="stylesheet" href="">

<style type="text/css"></style>

<!--/* 
      자바스크립트 인라인 
      th:inline="javascript" 은 스크립트 태그 내에서 Thymeleaf 문법([[...]])을 해석할 수 있게 해주는 설정이다.
      JavaScript 안에서 Thymeleaf 값을 넣을 때는 th:inline="javascript" 와 /*[[뭐뭐뭐]]*/ 구문을 사용해야 한다. 
*/-->
<script th:inline="javascript">
 /*<![CDATA[*/

 $(document).ready(function(){
	  
	  $("button#btnLOGIN").click(function(){
		  func_Login();
	  });
	  
	  
	  $("input#passwd").keydown(function(event){
		  
		  if(event.keyCode == 13) { // 엔터를 했을 경우
			  func_Login();
		  }
	  });
	  
  });// end of $(document).ready(function(){})------------------------------
  
  
  // Function Declaration
  
  function func_Login() {
	  
	  const memberid = $("input#memberid").val(); 
	  const passwd = $("input#passwd").val(); 
	
	  if(memberid.trim()=="") {
	 	 alert("아이디를 입력하세요!!");
		 $("input#memberid").val(""); 
		 $("input#memberid").focus();
		 return; // 종료 
	  }
	
	  if(passwd.trim()=="") {
		 alert("비밀번호를 입력하세요!!");
		 $("input#passwd").val(""); 
		 $("input#passwd").focus();
		 return; // 종료 
	  }
	  
	  const frm = document.loginFrm;
	  
	  frm.action = /*[[@{/security/loginEnd}]]*/ 'url';
	  /* 
	     Spring Security 를 사용한 로그인 처리를 하는 것이므로 
	     Controller 인 com.spring.app.security.controller.MemberController 파일에는 
	     URL "member/loginEnd" 을 넣지 않고,
	     /myspringboot/src/main/java/com/spring/app/security/config/SecurityConfig.java 파일에서 
	     loginProcessingUrl("/security/loginEnd") 을 처리해주는 것이다.!!!!
	  */
	  frm.method = "POST";
	  frm.submit();
	  
  }// end of function func_Login()------------------------	 
	 
 /*]]>*/	
</script>

<body>
<div class="container">
		<div class="row" style="display: flex; border: solid 0px red;">
			<div class="col-md-8 col-md-offset-2" style="margin: auto; border: solid 0px blue;">
				<h2 class="text-muted">Spring Security(스프링 보안) 로그인</h2>
				<hr style="border: solid 1px orange">
				
				<div class="col-md-12 text-danger" th:text="${msg}"></div>
				
				<form name="loginFrm" class="mt-5">
					<div class="form-row">
					    <div class="form-group col-md-6">
							<label class="text-muted font-weight-bold" for="memberid">아이디</label>
							<input type="text" class="form-control" name="memberid" id="memberid" value=""/> 
                            <!--/* 부트스트랩에서 input 태그에는 항상 class form-control 이 사용되어져야 한다. */-->
			            </div>
			
						<div class="form-group col-md-6">
							<label class="text-muted font-weight-bold text-muted" for="passwd">비밀번호</label>
							<input type="password" class="form-control" name="passwd" id="passwd" value="" /> 
						</div>
					</div>
				</form>
			</div>
			
			<div class="col-md-8 col-md-offset-2" style="margin: auto; display: flex; border: solid 0px blue;">
				<div style="margin: auto; border: solid 0px blue;">
					<button style="width: 150px; height: 40px;" class="btn btn-primary" type="button" id="btnLOGIN">확인</button>
				</div>
			</div>
		</div>
	</div>	
</body>
</html> 
