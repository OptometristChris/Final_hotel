<!DOCTYPE html>
<html th:replace="~{layout/layout_main :: layout(~{::title}, ~{::link}, ~{::style}, ~{::script}, ~{::div.container})}" 
      lang="ko" 
      xmlns:th="http://www.thymeleaf.org"> 
<!-- ::title ì€   í˜„ì¬ í˜ì´ì§€ì˜ title   íƒœê·¸ë¥¼ ì½ì–´ë‹¤ê°€ templates/layout/layout_main.html íŒŒì¼ì˜ th:fragment="layout(title, link, css, script, content)" ì— ìˆëŠ” ì²«ë²ˆì§¸ íŒŒë¼ë¯¸í„°ë¡œ ì „ë‹¬í•œë‹¤. -->
<!-- ::link  ëŠ”   í˜„ì¬ í˜ì´ì§€ì˜ link    íƒœê·¸ë¥¼ ì½ì–´ë‹¤ê°€ templates/layout/layout_main.html íŒŒì¼ì˜ th:fragment="layout(title, link, css, script, content)" ì— ìˆëŠ” ë‘ë²ˆì§¸ íŒŒë¼ë¯¸í„°ë¡œ ì „ë‹¬í•œë‹¤. -->
<!-- ::style ì€   í˜„ì¬ í˜ì´ì§€ì˜ style   íƒœê·¸ë¥¼ ì½ì–´ë‹¤ê°€ templates/layout/layout_main.html íŒŒì¼ì˜ th:fragment="layout(title, link, css, script, content)" ì— ìˆëŠ” ì„¸ë²ˆì§¸ íŒŒë¼ë¯¸í„°ë¡œ ì „ë‹¬í•œë‹¤. -->
<!-- ::script ëŠ”  í˜„ì¬ í˜ì´ì§€ì˜ script  íƒœê·¸ë¥¼ ì½ì–´ë‹¤ê°€ templates/layout/layout_main.html íŒŒì¼ì˜ th:fragment="layout(title, link, css, script, content)" ì— ìˆëŠ” ë„¤ë²ˆì§¸ íŒŒë¼ë¯¸í„°ë¡œ ì „ë‹¬í•œë‹¤. -->
<!-- ::div.container ì€ í˜„ì¬ í˜ì´ì§€ì˜ div.container íƒœê·¸ë¥¼ ì½ì–´ë‹¤ê°€ templates/layout/layout_main.html íŒŒì¼ì˜ th:fragment="layout(title, link, css, script, content)" ì— ìˆëŠ” ë‹¤ì„¯ë²ˆì§¸ íŒŒë¼ë¯¸í„°ë¡œ ì „ë‹¬í•œë‹¤. --> 
<!-- íƒ€ì„ë¦¬í”„ëŠ” ë°±ì—”ë“œ ì„œë²„ì—ì„œ HTMLì„ ë™ì ìœ¼ë¡œ ë Œë”ë§í•˜ëŠ” ìš©ë„ë¡œ ì‚¬ìš©ëœë‹¤. -->

<head>
<meta charset="UTF-8">
<title>ë¡œê·¸ì¸</title>

<link rel="stylesheet" href="">

<style>
  :root{
    /* ì—°ê°ˆìƒ‰ í…Œë§ˆ (ì—…ë¡œë“œ ë¡œê·¸ì¸.html ê¸°ë°˜) */
    --bg: #f6f1ea;
    --panel: #ffffff;
    --line: #eadfd3;
    --line-2: #d8c6b3;
    --text: #2a2320;
    --muted: #7a6a61;

    --brand: #8b6a52;
    --brand-2: #b08a6e;
    --accent: #cda57a;
    --danger: #c94b4b;

    --shadow: 0 18px 45px rgba(54, 38, 25, .10);
    --radius: 18px;
  }

  /* layout_mainì´ bootstrapì„ ê¹”ì•„ë‘ë¯€ë¡œ,
     ë¡œê·¸ì¸ í˜ì´ì§€ ì „ìš©ìœ¼ë¡œë§Œ 'ì»¨í…Œì´ë„ˆ ì˜ì—­'ì„ ì¹´ë“œì²˜ëŸ¼ ë³´ì´ê²Œ í•œë‹¤. */
  .login-bg{
    background: radial-gradient(1200px 600px at 20% 10%, #fff, transparent 55%),
                radial-gradient(900px 500px at 80% 90%, #fff, transparent 50%),
                var(--bg);
    min-height: calc(100vh - 40px);
    display:flex;
    align-items:center;
    justify-content:center;
    padding:28px 14px;
  }

  .wrap{ width: 380px; max-width: 100%; }

  .brandbar{
    display:flex;
    justify-content:center;
    margin-bottom: 14px;
    letter-spacing:.14em;
    font-weight: 800;
    color: var(--brand);
  }

  .card{
    background: var(--panel);
    border: 1px solid var(--line);
    border-radius: var(--radius);
    box-shadow: var(--shadow);
    overflow:hidden;
  }

  .header{
    padding: 20px 18px 12px;
    text-align:center;
    border-bottom: 1px solid var(--line);
    background: linear-gradient(180deg, #fff, #fff7ef);
  }
  .header h1{ margin:0; font-size: 20px; letter-spacing:.04em; }
  .header p{ margin: 6px 0 0; color: var(--muted); font-size: 13px; }

  .tabs{
    display:flex;
    border-bottom: 1px solid var(--line);
    background: #fffaf5;
  }
  .tab{
    flex:1;
    border:0;
    background: transparent;
    padding: 12px 10px;
    font-weight: 700;
    color: var(--muted);
    cursor:pointer;
    position:relative;
  }
  .tab[aria-selected="true"]{
    color: var(--brand);
    background: #fff;
  }
  .tab[aria-selected="true"]::after{
    content:"";
    position:absolute;
    left:14px; right:14px; bottom:-1px;
    height:3px;
    background: var(--accent);
    border-radius: 999px;
  }

  .body{ padding: 18px; }

  .form{ display:none; }
  .form.active{ display:block; }

  .field{ margin-bottom: 12px; }
  .label{
    display:flex;
    align-items:center;
    justify-content:space-between;
    margin-bottom: 6px;
    font-size: 13px;
    color: var(--muted);
    font-weight: 700;
  }
  .input{
    width:100%;
    padding: 12px 12px;
    border: 1px solid var(--line-2);
    border-radius: 12px;
    outline:none;
    background: #fff;
    font-size: 14px;
    transition: border-color .15s, box-shadow .15s;
  }
  .input:focus{
    border-color: var(--accent);
    box-shadow: 0 0 0 4px rgba(205,165,122,.22);
  }

  .rowline{
    display:flex;
    align-items:center;
    justify-content:space-between;
    gap:10px;
    margin: 10px 0 14px;
  }
  .check{
    display:flex;
    align-items:center;
    gap:8px;
    color: var(--muted);
    font-size: 13px;
    user-select:none;
    margin:0;
  }
  .check input{ width:16px; height:16px; accent-color: var(--accent); }

  .secure{
    display:flex;
    align-items:center;
    gap:8px;
    color: var(--muted);
    font-size: 12px;
  }
  .lock{
    width:22px; height:22px;
    border-radius: 999px;
    display:grid;
    place-items:center;
    background: rgba(205,165,122,.18);
    border: 1px solid rgba(205,165,122,.35);
    color: var(--brand);
    font-weight: 900;
  }

  .btnx{
    width:100%;
    border:0;
    border-radius: 14px;
    padding: 12px 14px;
    font-weight: 800;
    cursor:pointer;
    background: linear-gradient(180deg, var(--brand), #6f513f);
    color:#fff;
    letter-spacing: .04em;
    transition: transform .06s ease, filter .15s ease;
  }
  .btnx:active{ transform: translateY(1px); }
  .btnx:hover{ filter: brightness(1.02); }

  .links{
    margin-top: 12px;
    display:flex;
    justify-content:center;
    gap:12px;
    flex-wrap:wrap;
    color: var(--muted);
    font-size: 12.5px;
  }
  .links a{
    color: var(--muted);
    text-decoration:none;
    border-bottom: 1px dashed transparent;
  }
  .links a:hover{
    color: var(--brand);
    border-bottom-color: rgba(139,106,82,.5);
  }

  /* ì„œë²„ msg(ë¡œê·¸ì¸Fail) */
  .server-msg{
    margin-bottom: 12px;
    font-size: 12.5px;
    color:#fff;
    background: var(--danger);
    border-radius: 12px;
    padding: 10px 10px;
    line-height: 1.45;
  }

  /* í”„ë¡ íŠ¸ ìœ íš¨ì„± ì—ëŸ¬ */
  .error{
    display:none;
    margin-top: 10px;
    font-size: 12.5px;
    color: #fff;
    background: var(--danger);
    border-radius: 12px;
    padding: 10px 10px;
    line-height: 1.45;
  }
  .error.show{ display:block; }

  /* ê´€ë¦¬ì ë¡œê·¸ì¸ ë²„íŠ¼(ë§í¬ì²˜ëŸ¼) */
  .admin-link{
    cursor:pointer;
    font-size: 12px;
    color: var(--brand);
    font-weight: 800;
    text-decoration:none;
    border-bottom: 1px dashed transparent;
    white-space: nowrap;
  }
  .admin-link:hover{
    border-bottom-color: rgba(139,106,82,.5);
  }
</style>

<!--/* 
      ìë°”ìŠ¤í¬ë¦½íŠ¸ ì¸ë¼ì¸ 
      th:inline="javascript" ì€ ìŠ¤í¬ë¦½íŠ¸ íƒœê·¸ ë‚´ì—ì„œ Thymeleaf ë¬¸ë²•([[...]])ì„ í•´ì„í•  ìˆ˜ ìˆê²Œ í•´ì£¼ëŠ” ì„¤ì •ì´ë‹¤.
      JavaScript ì•ˆì—ì„œ Thymeleaf ê°’ì„ ë„£ì„ ë•ŒëŠ” th:inline="javascript" ì™€ /*[[ë­ë­ë­]]*/ êµ¬ë¬¸ì„ ì‚¬ìš©í•´ì•¼ í•œë‹¤. 
*/-->
<script th:inline="javascript">
/*<![CDATA[*/

$(document).ready(function(){

  // ===== íƒ­ ì „í™˜ (íšŒì›/ë¹„íšŒì›) =====
  function setTab(active){
    const isMember = (active === "member");

    $("#tab-member").attr("aria-selected", String(isMember));
    $("#tab-guest").attr("aria-selected", String(!isMember));

    $("#panel-member").toggleClass("active", isMember);
    $("#panel-guest").toggleClass("active", !isMember);

    $("#err-member").removeClass("show").text("");
    $("#err-guest").removeClass("show").text("");
  }

  $("#tab-member").click(function(){ setTab("member"); });
  $("#tab-guest").click(function(){ setTab("guest"); });

  // ===== ì—ëŸ¬ í‘œì‹œ =====
  function showError($el, msg){
    $el.text(msg);
    $el.addClass("show");
  }

  // ===== íšŒì› ë¡œê·¸ì¸ ìœ íš¨ì„± + submit =====
  $("#panel-member").submit(function(e){
    const $err = $("#err-member");
    $err.removeClass("show").text("");

    const memberid = $.trim($("#memberid").val());
    const passwd   = $.trim($("#passwd").val());

    if(memberid === ""){
      e.preventDefault();
      showError($err, "ì•„ì´ë””(ë˜ëŠ” ì´ë©”ì¼)ë¥¼ ì…ë ¥í•˜ì„¸ìš”.");
      $("#memberid").focus();
      return false;
    }

    if(passwd === ""){
      e.preventDefault();
      showError($err, "ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”.");
      $("#passwd").focus();
      return false;
    }

    // ì—¬ê¸°ì„œë¶€í„° Spring Securityê°€ /security/loginEndë¡œ ì¸ì¦ ì²˜ë¦¬
    return true;
  });

  // Enterë¡œë„ submitë˜ì§€ë§Œ UXìƒ ë¹„ë°€ë²ˆí˜¸ì—ì„œ Enter ì²˜ë¦¬ë„ ìœ ì§€
  $("#passwd").keydown(function(event){
    if(event.keyCode == 13){
      $("#panel-member").submit();
    }
  });

  // ===== ê´€ë¦¬ì ë¡œê·¸ì¸ ì´ë™ =====
  $("#goAdminLogin").click(function(){
    const ctxPath = /*[[@{/}]]*/ "";
    location.href = `${ctxPath}admin/login`;
  });

}); // end of ready

/*]]>*/
</script>

</head>

<body>
<div class="container">
  <div class="login-bg">
    <div class="wrap">
      <div class="brandbar">CIEL</div>

      <section class="card" aria-label="ë¡œê·¸ì¸ ì¹´ë“œ">
        <div class="header">
          <h1>ë¡œê·¸ì¸</h1>
          <p>ì—°ê°ˆìƒ‰ í…Œë§ˆ Â· íšŒì›/ë¹„íšŒì› íƒ­</p>
        </div>

        <div class="tabs" role="tablist" aria-label="ë¡œê·¸ì¸ ë°©ì‹ ì„ íƒ">
          <button class="tab" id="tab-member" role="tab" aria-selected="true" aria-controls="panel-member" type="button">íšŒì›</button>
          <button class="tab" id="tab-guest"  role="tab" aria-selected="false" aria-controls="panel-guest"  type="button">ë¹„íšŒì›</button>
        </div>

        <div class="body">

          <!-- Controllerì—ì„œ request.setAttribute("msg", msg); ë¡œ ë‚´ë ¤ì£¼ëŠ” ë©”ì‹œì§€ -->
          <div class="server-msg" th:if="${msg != null and #strings.length(msg) > 0}" th:text="${msg}"></div>

          <!-- =======================
               íšŒì› ë¡œê·¸ì¸ (Spring Security)
               - memberChain: loginProcessingUrl("/security/loginEnd")
               - usernameParameter("memberid")
               - passwordParameter("passwd")
               ======================= -->
          <form class="form active"
                id="panel-member"
                name="loginFrm"
                role="tabpanel"
                aria-labelledby="tab-member"
                method="post"
                th:action="@{/security/loginEnd}">

            <div class="field">
              <div class="label"><span>ì•„ì´ë”” ë˜ëŠ” ì´ë©”ì¼</span></div>
              <input class="input" id="memberid" name="memberid" autocomplete="username" placeholder="ì•„ì´ë”” ë˜ëŠ” ì´ë©”ì¼" />
            </div>

            <div class="field">
              <div class="label"><span>ë¹„ë°€ë²ˆí˜¸</span></div>
              <input class="input" id="passwd" name="passwd" type="password" autocomplete="current-password" placeholder="ë¹„ë°€ë²ˆí˜¸" />
            </div>

            <div class="rowline">
              <label class="check">
                <input type="checkbox" name="rememberMe" />
                ë¡œê·¸ì¸ ìƒíƒœ ìœ ì§€
              </label>

              <div class="secure" title="ë³´ì•ˆ ë¡œê·¸ì¸">
                <span class="lock">ğŸ”’</span>
                <span>ë³´ì•ˆ</span>
              </div>
            </div>

            <div class="rowline" style="margin-top:0;">
              <span></span>
              <!-- íšŒì› ë¡œê·¸ì¸ í™”ë©´ì—ì„œ ê´€ë¦¬ì ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ì´ë™ -->
              <span class="admin-link" id="goAdminLogin">ê´€ë¦¬ì ë¡œê·¸ì¸ â†’</span>
            </div>

            <button class="btnx" type="submit">ë¡œê·¸ì¸</button>

            <div class="links">
              <!-- ì•„ë˜ ë§í¬ë“¤ì€ ë„¤ í”„ë¡œì íŠ¸ URLì— ë§ê²Œ í•„ìš”í•˜ë©´ êµì²´ -->
              <a th:href="@{/security/member_id_find}">ì•„ì´ë”” ì°¾ê¸°</a>
              <span>|</span>
              <a th:href="@{/security/member_pw_find}">ë¹„ë°€ë²ˆí˜¸ ì°¾ê¸°</a>
              <span>|</span>
              <a th:href="@{/security/memberRegister}">íšŒì›ê°€ì…</a>
            </div>

            <div class="error" id="err-member"></div>
          </form>

          <!-- =======================
               ë¹„íšŒì› ë¡œê·¸ì¸(í˜„ì¬ ì»¨íŠ¸ë¡¤ëŸ¬/URLì´ ì—†ë‹¤ë©´ ì„ì‹œ)
               - ì•„ì§ ë¯¸êµ¬í˜„ì´ë©´ submit ë§‰ê³  ì•ˆë‚´ë§Œ ë„ì›Œë„ ë¨
               ======================= -->
          <form class="form"
                id="panel-guest"
                role="tabpanel"
                aria-labelledby="tab-guest"
                method="post"
                action="#">

            <div class="field">
              <div class="label"><span>íœ´ëŒ€í°ë²ˆí˜¸</span></div>
              <input class="input" name="phone" inputmode="tel" autocomplete="tel" placeholder="íœ´ëŒ€í°ë²ˆí˜¸ (ìˆ«ìë§Œ)" />
            </div>

            <div class="field">
              <div class="label"><span>ê³ ê°ëª…</span></div>
              <input class="input" name="guestName" type="text" autocomplete="name" placeholder="ë¹„íšŒì› ê³ ê°ëª…" />
            </div>

            <button class="btnx" type="button" onclick="alert('ë¹„íšŒì› ë¡œê·¸ì¸ì€ ì•„ì§ ë¯¸êµ¬í˜„ì…ë‹ˆë‹¤.');">ë¹„íšŒì›ìœ¼ë¡œ ê³„ì†</button>

            <div class="error" id="err-guest"></div>
          </form>

        </div>
      </section>
    </div>
  </div>
</div>
</body>
</html>
